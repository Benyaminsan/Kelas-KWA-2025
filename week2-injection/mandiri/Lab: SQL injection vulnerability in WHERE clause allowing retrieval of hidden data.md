## Lab: SQL injection vulnerability in WHERE clause allowing retrieval of hidden data

Aplikasi web memiliki fitur untuk menampilkan produk berdasarkan kategori. Ketika pengguna memilih sebuah kategori (misalnya, "Gifts"), aplikasi membuat query SQL untuk mengambil produk yang relevan.

## Resources
https://portswigger.net/web-security/sql-injection/lab-retrieve-hidden-data
https://0a360072034cf1fa83e25b65007c00c2.web-security-academy.net/

## Langkah-langkah

1. Saya melihat setelah akses labnya, terdapat beberapa fitur kayak Gifts

<img width="1316" height="872" alt="image" src="https://github.com/user-attachments/assets/40418b4a-ebc8-4373-9e30-5150a0fbd2f2" />

Saat saya mengklik kategori "Gifts", URL berubah menjadi ``.../filter?category=Gifts`` dan hanya produk dalam kategori tersebut yang ditampilkan.

Ini mengindikasikan bahwa parameter category pada URL kemungkinan besar digunakan langsung dalam klausa ``WHERE`` pada query SQL di backend.
Query yang mungkin berjalan di server:
``
SELECT * FROM products WHERE category = 'Gifts' AND released = 1;
``
Catatan: Asumsinya ada kolom`` released = 1 ``untuk menandai produk yang sudah boleh tampil.

2. Tinggal kita lakukan injeksi, dengan catatan saya perlu membuat kondisi ``WHERE`` selalu bernilai ``TURE``. dan payloadnya saya coba gunakan ``' OR '1'='1``
Saya memodifikasi parameter category di URL menjadi:
`` Gifts' OR '1'='1'--``
<img width="1647" height="947" alt="image" src="https://github.com/user-attachments/assets/fc8b755d-d372-46bf-8ae2-786c230d0a76" />

- ' : Tanda kutip tunggal ini digunakan untuk "menutup" string 'Gifts.
- OR '1'='1' : Ini menambahkan kondisi yang selalu benar.
- ``--`` : Ini adalah komentar SQL yang akan membuat sisa query asli (seperti AND released = 1) diabaikan oleh database.

3. Saya ubah URL dari yang awalnya adalah ini:
``https://0a360072034cf1fa83e25b65007c00c2.web-security-academy.net/filter?category=Gifts``

Menjadi kayak gini:
``https://0a360072034cf1fa83e25b65007c00c2.web-security-academy.net/filter?category=Gifts' OR '1'='1'--``

<img width="1602" height="967" alt="image" src="https://github.com/user-attachments/assets/e10f69da-9399-4fb1-812e-ac646eb7cc41" />

dari query sql di backend menjadi:
```
SELECT * FROM products WHERE category = 'Gifts' OR '1'='1'--' AND released = 1;
```
Karena ada kondisi OR '1'='1', seluruh klausa WHERE akan bernilai TRUE untuk setiap baris produk di tabel, dan ``realeased=1 `` bakal tidak berfungsi.

4. Yeay sudah berhasil
<img width="1571" height="952" alt="image" src="https://github.com/user-attachments/assets/7d9c75cc-fbea-4609-8f4d-006b35b35d80" />
di laman terlihat semua produk yang ada di database, termasuk produk yang sebelumnya emang ga kelihatan saat memfilter berdasarkan kategori manapun.


## Alasan Keberhasilan: 
Aplikasi tidak melakukan sanitasi atau validasi pada input dari parameter`` category``. Nilai dari parameter tersebut langsung digabungkan ke dalam string query SQL, sehingga memungkinkan penyerang untuk mengubah logika query.
